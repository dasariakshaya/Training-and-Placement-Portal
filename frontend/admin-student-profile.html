<!DOCTYPE html>
<html lang="en">
<head>
    </head>
<body>
    <div class="container">
        </div>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    const studentId = urlParams.get('id');
    const token = localStorage.getItem('adminToken');

    if (!studentId || !token) {
        alert("Unauthorized or missing student ID.");
        window.location.href = "multi-login.html";
    }

    function loadProfile() {
        // This assumes a public or admin-accessible GET /api/students/:id route exists.
        fetch(`/api/students/${studentId}`, { 
            headers: { Authorization: `Bearer ${token}` }
        })
        .then(res => res.json())
        .then(student => {
            // ... profile loading logic remains the same ...
        })
        .catch(err => console.error(err));
    }

    function markPlaced() {
        // ✅ UPDATED: Correct API endpoint
        fetch(`/api/admin/students/${studentId}/mark-placed`, {
            method: 'PATCH',
            headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${token}` },
            body: JSON.stringify({ placed: true, placedCompany: prompt("Enter company name:") || "N/A" })
        })
        .then(res => res.json())
        .then(() => {
            alert("✅ Student marked as placed.");
            loadProfile();
        })
        .catch(() => alert("❌ Failed to mark student as placed."));
    }

    function markVerified() {
        // ✅ UPDATED: Correct API endpoint
        fetch(`/api/admin/students/${studentId}/mark-verified`, {
            method: 'PATCH',
            headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${token}` },
            body: JSON.stringify({ verified: true })
        })
        .then(res => {
            if (!res.ok) throw new Error("Request failed");
            return res.json();
        })
        .then(() => {
            alert("✅ Student marked as verified.");
            loadProfile();
        })
        .catch(err => alert("❌ Failed to mark student as verified."));
    }

    loadProfile();
</script>
</body>
</html>